<!DOCTYPE html>
<html>
<head>
<title>Donor List | PRC Baguio</title>

<style>
body{font-family:Arial;}
table{width:100%; border-collapse:collapse;}
th,td{border:1px solid #ccc; padding:7px;}
th{background:#c62828; color:white;}
button{padding:5px;}
</style>

</head>

<body>

<h2>Donor List</h2>

<button onclick="location.href='donor-entry.html'">Add New Donor</button>
<button onclick="location.href='dashboard.html'">Back to Homepage</button>

<br><br>

<table>
<thead>
<tr>
<th>#</th>
<th>Date</th>
<th>Name</th>
<th>Blood Type</th>
<th>Age</th>
<th>Contact</th>
<th>Actions</th>
</tr>
</thead>

<tbody id="donorTable"></tbody>

</table>

<script>

function loadDonors(){

let donors = JSON.parse(localStorage.getItem("donors")) || [];

let table=document.getElementById("donorTable");
table.innerHTML="";

donors.forEach((d,i)=>{

table.innerHTML+=`
<tr>
<td>${i+1}</td>
<td>${d.date}</td>
<td>${d.surname}, ${d.firstName}</td>
<td>${d.bloodType}</td>
<td>${d.age}</td>
<td>${d.contact}</td>
<td>
<button onclick="editDonor(${i})">Edit</button>
<button onclick="deleteDonor(${i})">Delete</button>
</td>
</tr>
`;

});

}

function editDonor(i){
localStorage.setItem("editIndex",i);
location.href="donor-entry.html";
}

function deleteDonor(i){
if(confirm("Delete donor?")){
 let donors=JSON.parse(localStorage.getItem("donors"));
 donors.splice(i,1);
 localStorage.setItem("donors",JSON.stringify(donors));
 loadDonors();
}
}

loadDonors();

</script>

</body>
</html>

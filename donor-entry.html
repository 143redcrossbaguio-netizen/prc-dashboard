<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Donor Entry</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #ffffff;
  color: #b71c1c;
  margin: 20px;
}

header {
  text-align: center;
}

header img {
  height: 80px;
}

form {
  max-width: 1100px;
  margin: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.row {
  display: flex;
  gap: 10px;
  align-items: center;
  flex-wrap: nowrap;
}

input {
  padding: 6px;
  font-size: 14px;
}

.auto {
  flex: 1;
}

.small { width: 60px; }
.mini { width: 45px; }

.serial-prefix {
  width: 90px;
  background: #eee;
  border: 1px solid #ccc;
  text-align: center;
}

button {
  background: #b71c1c;
  color: white;
  padding: 10px 20px;
  border: none;
  cursor: pointer;
  border-radius: 5px;
}

button:hover {
  background: #a11212;
}

#extraType {
  display: none;
  width: 200px;
}
</style>
</head>

<body>

<header>
  <img src="assets/logo.png">
  <h2>Philippine Red Cross – Baguio City Chapter</h2>
</header>

<form id="donorForm">

<!-- DATE TODAY -->
<div class="row">
  <label>Date:</label>
  <input type="date" id="entryDate">
</div>

<!-- DONOR TYPE -->
<div class="row">
  <label>Donor Type:</label>
  <input id="donorType" maxlength="1" class="mini">
  <input id="donorTypeAuto" readonly class="auto">
  <input id="extraType" placeholder="Specify (MBD / Patient)">
</div>

<!-- NAME -->
<div class="row">
  <label>Suffix</label>
  <input id="suffix" class="small">
  <label>Surname</label>
  <input id="surname" class="auto">
  <label>First</label>
  <input id="firstName" class="auto">
  <label>Middle</label>
  <input id="middleName" class="auto">
</div>

<!-- BIRTHDAY -->
<div class="row">
  <label>Birthday</label>
  <input id="bd" class="mini" maxlength="2" placeholder="DD">
  <input id="bm" class="mini" maxlength="2" placeholder="MM">
  <input id="by" class="mini" maxlength="4" placeholder="YY/YYYY">
  <label>Age</label>
  <input id="age" class="small" readonly>
</div>

<!-- TIME -->
<div class="row">
  <label>Time Started</label>
  <input id="sh" class="mini" maxlength="2">
  <input id="sm" class="mini" maxlength="2">
  <label>Time Ended</label>
  <input id="eh" class="mini" maxlength="2">
  <input id="em" class="mini" maxlength="2">
</div>

<!-- BUTTONS -->
<div class="row" style="justify-content:center;margin-top:20px;">
  <button type="button" onclick="saveDonor()">SUBMIT</button>
  <button type="button" onclick="location.href='donor-list.html'">GO TO DONOR LIST</button>
  <button type="button" onclick="location.href='index.html'">BACK TO HOMEPAGE</button>
</div>

</form>

<script>
// DATE TODAY
const today = new Date().toISOString().split("T")[0];
entryDate.value = today;

// DONOR TYPE
donorType.addEventListener("input", () => {
  const v = donorType.value.toUpperCase();
  if (v === "W") {
    donorTypeAuto.value = "Walk-in";
    extraType.style.display = "none";
  }
  if (v === "M") {
    donorTypeAuto.value = "MBD";
    extraType.style.display = "inline-block";
  }
  if (v === "P") {
    donorTypeAuto.value = "Patient Directed";
    extraType.style.display = "inline-block";
  }
});

// BIRTHDAY AUTO + AGE
bd.addEventListener("input",()=>bd.value.length===2 && bm.focus());
bm.addEventListener("input",()=>bm.value.length===2 && by.focus());

by.addEventListener("input",()=>{
  if(by.value.length===2) by.value="19"+by.value;
  const birth = new Date(by.value,bm.value-1,bd.value);
  const now = new Date();
  age.value = now.getFullYear() - birth.getFullYear();
});

// TIME AUTO CURSOR
sh.addEventListener("input",()=>sh.value.length===2 && sm.focus());
sm.addEventListener("input",()=>sm.value.length===2 && eh.focus());
eh.addEventListener("input",()=>eh.value.length===2 && em.focus());

// SAVE
function saveDonor(){
  alert("Donor saved correctly ✔");
  donorForm.reset();
  entryDate.value = today;
  donorTypeAuto.value="";
  extraType.style.display="none";
}
</script>

</body>
</html>

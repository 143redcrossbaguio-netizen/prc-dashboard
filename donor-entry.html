<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Donor Entry</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #fff;
  color: #b71c1c;
  margin: 20px;
}

header { text-align: center; }
header img { height: 80px; }

form {
  max-width: 1200px;
  margin: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.row {
  display: flex;
  gap: 8px;
  align-items: center;
}

input {
  padding: 6px;
  font-size: 14px;
}

.auto { flex: 1; }
.medium { flex: 1.5; }
.small { width: 80px; }
.mini { width: 50px; }

.serial-prefix {
  width: 100px;
  background: #eee;
  text-align: center;
}

#donorExtra {
  display: none;
}

button {
  background: #b71c1c;
  color: white;
  padding: 10px 16px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
button:hover { background: #a11212; }
</style>
</head>

<body>

<header>
  <img src="assets/logo.png">
  <h2>Philippine Red Cross – Baguio City Chapter</h2>
</header>

<form id="donorForm">

<!-- DATE -->
<div class="row">
  <label>Date</label>
  <input type="date" id="entryDate">
</div>

<!-- DONOR TYPE -->
<div class="row">
  <label>Donor Type</label>
  <input id="donorType" class="small">
  <input id="donorExtra" class="auto" placeholder="Specify (MBD / Patient Directed)">
</div>

<!-- NAME -->
<div class="row">
  <input id="suffix" placeholder="Suffix" class="small">
  <input id="surname" placeholder="Surname" class="auto">
  <input id="firstName" placeholder="First Name" class="auto">
  <input id="middleName" placeholder="Middle Name" class="auto">
</div>

<!-- BIRTHDAY -->
<div class="row">
  <label>Birthday</label>
  <input id="bd" maxlength="2" class="mini" placeholder="DD">
  <input id="bm" maxlength="2" class="mini" placeholder="MM">
  <input id="by" maxlength="4" class="mini" placeholder="YY/YYYY">
  <label>Age</label>
  <input id="age" readonly class="small">
</div>

<!-- ADDRESS -->
<div class="row">
  <input id="address" placeholder="Address" class="medium">
  <input id="city" placeholder="City/Region" maxlength="15" class="small">
</div>

<!-- CONTACT -->
<div class="row">
  <label>Contact</label>
  <input id="c1" maxlength="4" class="mini">
  <input id="c2" maxlength="3" class="mini">
  <input id="c3" maxlength="4" class="mini">
</div>

<!-- SERIAL -->
<div class="row">
  <label>Serial</label>
  <input class="serial-prefix" value="PRC2600-" readonly>
  <input id="serial" class="auto">
</div>

<!-- BLOOD -->
<div class="row">
  <label>Blood Type</label>
  <input id="bloodType" class="small">
  <label>Times Donated</label>
  <input id="times" class="mini">
</div>

<!-- BAGS -->
<div class="row">
  <label>Bag Used</label>
  <input id="bagUsed" class="small">
  <label>Bag Type</label>
  <input id="bagType" class="small">
  <label>Amount</label>
  <input id="amount" class="small">
</div>

<!-- TIME -->
<div class="row">
  <label>Time Started</label>
  <input id="sh" maxlength="2" class="mini">
  <input id="sm" maxlength="2" class="mini">
  <label>Time Ended</label>
  <input id="eh" maxlength="2" class="mini">
  <input id="em" maxlength="2" class="mini">
</div>

<!-- BUTTONS -->
<div class="row" style="justify-content:center;margin-top:20px;">
  <button type="button" onclick="saveDonor()">SUBMIT</button>
  <button type="button" onclick="location.href='donor-list.html'">GO TO DONOR LIST</button>
  <button type="button" onclick="location.href='index.html'">BACK TO HOMEPAGE</button>
</div>

</form>

<script>
// Date today
const today = new Date().toISOString().split("T")[0];
entryDate.value = today;

// Donor Type logic
donorType.oninput = () => {
  const v = donorType.value.toUpperCase();
  if (v === "W") {
    donorType.value = "Walk-in";
    donorExtra.style.display = "none";
  }
  if (v === "M") {
    donorType.value = "MBD";
    donorExtra.style.display = "inline-block";
  }
  if (v === "P") {
    donorType.value = "Patient Directed";
    donorExtra.style.display = "inline-block";
  }
};

// Birthday + Age
bd.oninput = ()=>bd.value.length===2 && bm.focus();
bm.oninput = ()=>bm.value.length===2 && by.focus();
by.oninput = ()=>{
  if(by.value.length===2) by.value="19"+by.value;
  const d=new Date(by.value,bm.value-1,bd.value);
  age.value=new Date().getFullYear()-d.getFullYear();
};

// Contact auto
c1.oninput=()=>c1.value.length===4&&c2.focus();
c2.oninput=()=>c2.value.length===3&&c3.focus();

// Blood type
bloodType.oninput=()=>{
  const v=bloodType.value.toUpperCase();
  const map={AP:"A+",AN:"A-",BP:"B+",BN:"B-",ABP:"AB+",ABN:"AB-",OP:"O+",ON:"O-"};
  if(map[v]) bloodType.value=map[v];
};

// Bags
bagUsed.oninput=()=>bagUsed.value=bagUsed.value.toUpperCase()==="K"?"Karmi":bagUsed.value.toUpperCase()==="T"?"Terumo":bagUsed.value;
bagType.oninput=()=>bagType.value={S:"Single",D:"Double",T:"Triple"}[bagType.value.toUpperCase()]||bagType.value;
amount.oninput=()=>amount.value={4:"450mL",Q:"QNS",U:"UB"}[amount.value.toUpperCase()]||amount.value;

// Time auto
sh.oninput=()=>sh.value.length===2&&sm.focus();
sm.oninput=()=>sm.value.length===2&&eh.focus();
eh.oninput=()=>eh.value.length===2&&em.focus();

function saveDonor(){
  alert("Donor saved ✔");
  donorForm.reset();
  entryDate.value=today;
  donorExtra.style.display="none";
}
</script>

</body>
</html>
